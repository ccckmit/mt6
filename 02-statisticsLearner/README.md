# 第 3 課 -- 有限狀態機學習

## 語言模型

[lib/grammar.js](lib/grammar.js)

```js
/*
S = NP?'VP?
NP = A* /N
VP = (V NP?)?
N = 人 | 魚
V = 愛 | 食
A = 藍 | 紅
*/
...

B.P = { NP: 0.7, VP: 0.7, VP_NP: 0.6, NP_A: 0.4, 
        '藍人': 0.1, '藍魚': 0.9, 
        '小人': 0.4, '小魚': 0.6 }

...
```

## 有限狀態機

```
^=>A:
^=>N:
^=>':
'=>V:
'=>/:
/=>A:
/=>N:
N=>$
/=>$
```

```
D:\Dropbox\github\mt6\02-statistics\tool>node gen 10000 > word.10000.bak
D:\Dropbox\github\mt6\02-statistics\tool>node gen 10000 tag > tag.10000.bak
D:\Dropbox\github\mt6\02-statistics\tool>node statistics tag.10000.bak
map1={
 ".": 10000,
 "'": 10000,
 "V": 6867,
 "/": 6867,
 "N": 11192,
 "A": 7413
}
map2={
 ".'": 2959,
 "'V": 6867,
 "V/": 6867,
 "/N": 2495,
 ".N": 4280,
 "N'": 7041,
 ".A": 2761,
 "AA": 2996,
 "AN": 4417,
 "/A": 1656
}
P('|.)=0.2959
P(V|')=0.6867
P(/|V)=1
P(N|/)=0.36333187709334497
P(N|.)=0.428
P('|N)=0.6291100786275912
P(A|.)=0.2761
P(A|A)=0.40415486307837584
P(N|A)=0.5958451369216242
P(A|/)=0.24115334207077327
P={
 "NP": 0.7041,
 "VP": 0.6867,
 "VP_NP": 0.6044852191641182,
 "NP_A": 0.40415486307837584,
 "藍人": null,
 "藍魚": null,
 "小人": null,
 "小魚": null
}

D:\Dropbox\github\mt6\02-statistics\tool>node statistics word.10000.bak
map1={
 ".": 10000,
 "小": 3717,
 "魚": 6827,
 "'": 10000,
 "愛": 3475,
 "/": 7029,
 "人": 4523,
 "藍": 3829,
 "食": 3554
}
map2={
 ".小": 1360,
 "小小": 701,
 "小魚": 1372,
 "魚'": 4267,
 "'愛": 3475,
 "愛/": 3475,
 "/人": 1293,
 "小藍": 753,
 "藍藍": 793,
 "藍人": 209,
 "人'": 2783,
 ".'": 2950,
 "'食": 3554,
 "食/": 3554,
 "/魚": 1249,
 "藍魚": 2066,
 ".人": 2130,
 ".魚": 2140,
 "/小": 895,
 "小人": 891,
 "/藍": 863,
 "藍小": 761,
 ".藍": 1420
}
P(小|.)=0.136
P(小|小)=0.1885929513048157
P(魚|小)=0.3691148775894539
P('|魚)=0.625018309652849
P(愛|')=0.3475
P(/|愛)=1
P(人|/)=0.18395219803670507
P(藍|小)=0.20258272800645682
P(藍|藍)=0.2071036824236093
P(人|藍)=0.05458344215199791
P('|人)=0.6152995799248286
P('|.)=0.295
P(食|')=0.3554
P(/|食)=1
P(魚|/)=0.17769241712903686
P(魚|藍)=0.5395664664403238
P(人|.)=0.213
P(魚|.)=0.214
P(小|/)=0.1273296343718879
P(人|小)=0.2397094430992736
P(藍|/)=0.12277706643903827
P(小|藍)=0.19874640898406895
P(藍|.)=0.142
P={
 "NP": null,
 "VP": null,
 "VP_NP": null,
 "NP_A": null,
 "藍人": 0.09186813186813186,
 "藍魚": 0.9081318681318681,
 "小人": 0.3937251436146708,
 "小魚": 0.6062748563853292
}
```
